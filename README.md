# Lumen API

#### Get Source
    $ git clone https://github.com/abeatrice/lumen-api.git
    $ cd lumen-api

#### Install Dependencies
    $ composer install

#### Copy env file
    $ cp .env.example .env

#### Create database in mysql
    $ mysql -u root -p
    $ create database lumen;
    $ exit

#### Migrate and seed tables
    $ php artisan migrate:fresh --seed

#### Serve the application
    $ php -S localhost:8000 -t public 

#### Postman collection
    open postman
    select import
    select lumen-api.postman_collection.json from project root

#### Run Tests
    $ ./vendor/bin/phpunit

#### Middleware
    auth - requires http request to include Bearer Token generated by /api/user/login
    isOwner - requires authenticated user to be the requested resource owner

#### API

| Verb      | Endpoint                      | Description                       | Middleware    |
|:--------- |:----------------------------- |:--------------------------------- |:------------- |
| POST      | /api/user/register            | register a new user               |               |
| POST      | /api/user/login               | login a user & get a Bearer Token |               |
| POST      | /api/user/{userId}/flights    | assign flight to user             | auth, isOwner |
| GET       | /api/user/{userId}/flights    | get user's flights                | auth, isOwner |
| GET       | /api/flights                  | get all flights                   | auth          |
| GET       | /api/flights/{flightId}       | get one flight by id              | auth          |